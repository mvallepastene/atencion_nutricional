@model nutricion_examen.Models.Agenda
@{
    ViewBag.Title = "Posts2";
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Nutri la Vida</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="~/Content/css/Posts.css" />
    <link rel="shortcut icon" href="~/Content/img/broccoli2.png" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="~/Content/plugins/jquery-ui/jquery-ui.css" rel="stylesheet" />
    <link href="~/Content/plugins/jquery-timepicker/jquery.timepicker.min.css" rel="stylesheet" />
</head>
<body>
    <!--Navbar-->
    <header>
        <div>
            <nav class="navbar container-fluid navbar-inverse fixed-top" style="background-color: #26ae11;">
                <a class="navbar-brand" href="@Url.Action("Index","FrontEnd")">Página principal</a>
                <a href="@Url.Action("Quien_soy","FrontEnd")">Acerca de mi</a>
                <a href="@Url.Action("Index","FrontEnd")#recetas">Recetas Saludables</a>
                <a href="@Url.Action("Index","FrontEnd")#servicios">Servicios</a>
                <a href="@Url.Action("Blog","FrontEnd")">Blog</a>
                <a href="#footer">Contacto</a>
                <button type="button" class="btn btn-default btn-lg" data-toggle="modal" data-target="#modalagenda">
                    Agendar Hora
                </button>

                <form class="form-inline">
                    <a href="@Url.Action("Index","Home")" title="Administración"> <span><i class="fa fa-home"></i></span></a>
                </form>
            </nav>
        </div>
    </header>

    <main>
        <div class="titulo-post">
            <h1>El ayuno intermitente no es para todo el mundo</h1>
        </div>
        <section class="post-content" id="post-content">
            <div class="content">
                <article class="post">
                    <div class="post-header">
                        <div class="post-img-2"></div>
                    </div>
                    <div class="post-body">
                        <span>by Verónica Cardozo | 5 Junio, 2020 | Tips</span>
                        <p>
                            El ayuno intermitente no debería ser algo que se pueda recomendar a las masas a la ligera, ya que es algo que se debe hacer de manera correcta,
                            bajo asesoría médica, porque si bien tiene muchos beneficios, el ayuno intermitente no es para todo el mundo.
                        </p>
                        <p>
                            Algunas condiciones de salud impiden hacerlo: personas que buscan mejorar fertilidad, mujeres embarazadas, adolescentes, personas mayores de 70 años,
                            los que sufren de algún trastorno de alimentación (anorexia, bulimia, atracón). Esto es un estilo de alimentación, no es una dieta, es un modelo de organización
                            en el que tienes que restringir el tiempo en el que comes, ayunar, y esto puede ser contraproducente para un grupo de personas.
                        </p>
                        <p>
                            No hay suficiente evidencia científica para decir que es un método mejor que otro, más bien la hay sobre que no es superior a ningún otro método que se utilice;
                            al final lo que va a importar es que comas una dieta que se adecúe a tus necesidades, alimentos que toleres bien, y que si quieres perder grasa exista un déficit
                            de calorías.
                        </p>
                        <p>
                            ¿Qué pasa con este método y por qué es funcional para algunos? Pasa que al cerrar la ventana en que comes, automáticamente consumes menos calorías, porque quedas
                            picando menos. Sin duda, cuando uno rompe el ayuno comienzan los picos de insulina, las ganas de comer; entonces, tenemos menos tiempo para comer, y cuando llevas
                            varios días haciéndolo te acostumbras a esa estructura, pero como ya dije, el ayuno intermitente no es para todo el mundo.
                        </p>
                        <p>
                            He visto que los hombres siguen este método con mayor facilidad que las mujeres. Nuestra programación genética y hormonal es distinta, nuestras reacciones lo son,
                            pero no quiere decir que las mujeres no puedan hacerlo. El ayuno intermitente si bien tiene algunos indicios positivos, a nivel de salud, de control de calorías,
                            no es la fórmula mágica ni la única manera de comer. Al final del día, aquello que te va a funcionar es lo que hagas a largo plazo, porque si te va bien con un
                            ayuno intermitente en un par de semanas o con cualquier otro método por ese mismo tiempo, pero no lo sostienes luego y tiras la toalla, puedes crear un efecto
                            contraproducente; entonces solo hay que dar pequeños pasos para alcanzar una meta grande. ¡Aprende a captar lo que le hace bien a tu cuerpo!
                        </p>
                    </div>
                    <div class="button-combeback-posts">
                        <a href="@Url.Action("Blog", "FrontEnd")" class="btn-single-page">VOLVER AL BLOG</a>
                    </div>
                </article>
            </div>
        </section>

        <!-- Modal Agenda -->

        <div class="modal fade" id="modalagenda" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">

                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Agenda</h4>
                        <form id="frmAgenda" class="form-normal" action="~/Agenda/Create" method="post">
                            <div class="form-group">
                                <label>Rut (sin guión)</label>
                                <input type="text" id="rut" name="rut" class="form-control" placeholder="">
                            </div>
                            <div class="form-group">
                                <label>Nombre</label>
                                <input type="text" id="nombre" name="nombre" class="form-control" placeholder="">
                            </div>
                            <div class="form-group">
                                <label>Apellido</label>
                                <input type="text" id="apellido" name="apellido" class="form-control" placeholder="">
                            </div>
                            <div class="form-group">
                                <label>Fecha de Nacimiento</label>
                                <input type="date" id="fechanac" name="fecha_nacimiento" class="form-control" placeholder="">
                            </div>
                            <div class="form-group">
                                <label>Número teléfono</label>
                                <input type="text" id="telefono" name="numero_tel" class="form-control" placeholder="">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="email" name="email" class="form-control" placeholder="">
                            </div>
                            <div class="form-group">
                                <label>Fecha cita</label>
                                <input type="text" id="fechcita" name="fecha_cita" class="form-control" placeholder="dd-mm-aaaa">
                            </div>
                            <div class="form-group">
                                <label>Hora cita</label>
                                <input type="text" class="form-control" id="horacita" name="hora_cita" placeholder="Seleccione la hora" required>
                            </div>
                            <div class="form-group">
                                <input type="hidden" id="id_estado" name="id_estado" value="1" />
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <input type="submit" id="btnSave" class="btn-a btn-default" data-dismiss="modal" value="Agregar" />
                    </div>

                </div>
            </div>
        </div>
    </main>

    <footer id="footer">
        <div class="contenedor-c">
            <h2 class="titulo">Contacto</h2>
        </div>
        <div class="contenedor-footer">
            <div class="content-foot">
                <h4>Teléfono</h4>
                <p>+562 2222222</p>
            </div>
            <div class="content-foot">
                <h4>E-Mail</h4>
                <p>contacto@nutrilavida.cl</p>
            </div>
            <div class="content-foot">
                <h4>Ubicación</h4>
                <p>Santiago, Región Metropolitana</p>
            </div>
        </div>
        <h2 class="titulo-final"> &copy; 2020 - Todos los Derechos Reservados.</h2>
    </footer>


    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    @*<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>*@
    <script src="~/Content/plugins/jquery/jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src=" disableSpecificDays.js "></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="~/Content/plugins/jquery-timepicker/jquery.timepicker.min.js"></script>
</body>
</html>

<script type="text/javascript">

    $('#btnSave').click(function(){
        //creamos el Objeto Agenda
        var agenda = {
        Id_Agenda : 0,
            Rut: $('#rut').val(),
            Nombre : $('#nombre').val(),
            Apellido:$('#apellido').val(),
            Fecha_Nacimiento: $('#fechanac').val(),
            Numero_Tel: $('#telefono').val(),
            Email:$('#email').val(),
            Fecha_Cita : $('#fechcita').val(),
            Hora_Cita : $('#hora').val(),
            Id_Estado : 1
        }
        console.log(agenda);
    //utilizamos Ajax para enviar el objeto al controlador que crea la Agenda

        $.ajax({
        url:'@Url.Action("Create","Agenda")',
        method:'post',
        data:agenda,

            success: function (r) {
                console.log(r.res);
         if(r.res == 1){
          alert("Agenda Creagada")
        }
        }
        });


    });

    $('#fechanac').blur(function () {
        var FechaNacimiento = $('#fechanac').val();
        var fechaNace = new Date(FechaNacimiento);
        var fechaActual = new Date()

        var mes = fechaActual.getMonth();
        var dia = fechaActual.getDate();
        var año = fechaActual.getFullYear();

        fechaActual.setDate(dia);
        fechaActual.setMonth(mes);
        fechaActual.setFullYear(año);

        edad = Math.floor(((fechaActual - fechaNace) / (1000 * 60 * 60 * 24) / 365));

        if (edad < 18) {
            alert("Usten no puede registrar una hora, ya que es menor de edad");

            $('#btnSave').prop("disabled", true);
        } else {
            $('#btnSave').prop("disabled", false);
        }
        return edad;
    });
</script>

<script type="text/javascript">
    $('#fechcita').datepicker({
        dateFormat: "dd-mm-yy",
        daysOfWeekDisabled: '0,6',
        lang: "es",
        todayHighlight: true,
        showAnim: "slide",
        minDate: 0,
        monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
        dayNamesMin: ['Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sa', 'Do'],
        beforeShowDay: function (date) {
            var dayOfWeek = date.getDay();
            // 0 : Lunes, 6 : Domingo, ...
            if (dayOfWeek == 0 || dayOfWeek == 6) return [false];
            else return [true];
        },
    });

    //TimePicker...
    $(document).ready(function () {
        $('#horacita').timepicker({
            timeFormat: 'H:i',
            step: 60,
            minTime: '9:00',
            maxTime: '18:00',
            disableTimeRanges: [
                ['13:00 pm', '14:00 pm'], ['14:00 pm', '15:00 pm']
            ]

        });
    });

</script>
